<div class="container-fluid dashboard-wrapper">
  <div class="d-flex flex-wrap" style="gap: 10px; margin: 0 -5px;">

    <!-- Cột 1: Main + Sub Card -->
    <div class="d-flex flex-column" style="flex: 1 1 280px; min-width: 0; gap: 10px; padding: 0 5px;">
      <!-- Main Card -->
      <div class="card flex-fill">
        <div class="card-body" style="overflow-x: auto;">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="card-title mb-0 main-label">Chưa có</h5>
            <span class="main-change text-success">0</span>
          </div>
          <p class="card-text mb-1 fw-bold main-produced" style="font-weight:bold; font-size: 1.25rem;">0</p>
          <p class="card-text mb-2 text-muted">
            / <span class="main-qty"></span> <span class="main-unit"></span> theo KH
          </p>
          <div class="progress" style="height: 10px;">
            <div class="progress-bar bg-success" role="progressbar" 
                style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
      </div>

      <!-- Sub Card -->
      <div class="card flex-fill">
        <div class="card-body" style="overflow-x: auto;">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="card-title mb-0 sub-label">Chưa có</h5>
            <span class="sub-change text-danger">0</span>
          </div>
          <p class="card-text mb-1 fw-bold sub-produced" style="font-weight:bold; font-size: 1.25rem;">0</p>
          <p class="card-text mb-2 text-muted">
            / <span class="sub-qty"></span> <span class="sub-unit"></span> theo KH
          </p>
          <div class="progress" style="height: 10px;">
            <div class="progress-bar bg-success" role="progressbar" 
                style="width: 10%;" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cột 2: Chart Category -->
    <div class="d-flex flex-column" style="flex: 1.8 1 280px; min-width: 0; padding: 0 5px;">
      <div class="card flex-fill">
        <div class="card-body" style="overflow-x: auto;">
          <h5 class="card-title category-title">Sản lượng mặt hàng theo hệ</h5>
          <div class="chart-container" style="position: relative; height:320px; min-width: 250px;">
            <canvas id="chart-category"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Cột 3: Chart Attribute + Select -->
    <div class="d-flex flex-column" style="flex: 1.2 1 280px; min-width: 0; padding: 0 5px;">
      <div class="card flex-fill">
        <div class="card-body" style="overflow-x: auto;">
          <!-- Hàng trên: Tiêu đề + Select -->
          <div class="d-flex justify-content-between align-items-center mb-1">
            <h5 class="card-title attribute-title">Sản lượng hoàn thành</h5>
            <select id="attribute-system-select" class="custom-select" style="width: auto;">
              <!-- options fill bằng JS -->
            </select>
          </div>

          <!-- Hàng dưới: Biểu đồ -->
          <div class="chart-container" style="position: relative; height:300px; min-width: 250px;">
            <canvas id="chart-attribute"></canvas>
          </div>
        </div>
      </div>
    </div>

  </div>


  <!-- HÀNG 2: Chart Manufacturing -->
  <div class="row g-3 mt-3">
    <div class="col-12">
      <div class="card h-100">
        <div class="card-body" style="overflow-x: auto;">
          <h5 class="card-title">Báo cáo sản lượng sản xuất</h5>
          <div class="chart-container" style="position: relative; height:350px; min-width: 400px;">
            <canvas id="chart-manufacturing"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- HÀNG 3: Chart BOM -->
  <div class="row g-3 mt-3">
    <div class="col-12">
      <div class="card h-100">
        <div class="card-body" style="overflow-x: auto;">
          <h5 class="card-title bom-title">Báo cáo tiêu hao NVL / 1 tấn thành phẩm</h5>
          <div id="charts-container" class="charts-container" style="position: relative;display: flex;flex-wrap: wrap;justify-content: space-around; min-width: 400px;">
            <!-- JS sẽ tạo canvas cho từng mặt hàng vào đây -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Đảm bảo responsive tốt hơn trên mobile */
    @media (max-width: 768px) {
      .dashboard-wrapper > .d-flex {
        gap: 10px !important;
        margin: 0 !important;
      }
      
      .dashboard-wrapper > .d-flex > div {
        flex: 1 1 100% !important;
        padding: 0 !important;
      }
    }
  </style>

</div>